import{c as x,e as f,a as j,u as b,f as g,J as m,g as v,t as u,j as t}from"./main-deOYDPWY.js";import{u as P,C as n}from"./CustomTextInput-CVvPr6Oa.js";import{u as y}from"./useForm-DeDg2o24.js";import{B as l}from"./button-CaKppYKQ.js";import{A as N}from"./arrow-left-D0rM7Gj6.js";import"./index-B3fMHV4j.js";import"./eye-DEYj2jSP.js";const F=j("b92d5239e21e866e19602ce1d1cdfe2b2dbad6d15ac052893a67171db78fb906"),D=x({method:"POST"}).middleware([f]).handler(F);function q(){const d=b(),o=g(),s=m.useLoaderData(),{patientId:c}=m.useParams(),p=v(D),i=P({mutationFn:e=>p({data:e}),onSuccess:()=>{o.invalidateQueries({queryKey:["patients"]}),o.invalidateQueries({queryKey:["patient",c]}),u.success("Patient updated successfully"),d({to:"/patients"})},onError:e=>{u.error("Error updating patient: "+e.message)}}),h=e=>e?new Date(e).toISOString().split("T")[0]:"",a=y({defaultValues:{name:s.name||"",email:s.email||"",phone:s.phone||"",dateOfBirth:h(s.dateOfBirth),address:s.address||""},onSubmit:async({value:e})=>{i.mutate({id:c,...e})}});return t.jsxs("div",{className:"container mx-auto py-4 space-y-6",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"flex justify-center",children:t.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>d({to:"/patients"}),children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),"Back to Patients"]})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Edit Patient"}),t.jsx("p",{className:"text-muted-foreground",children:"Update patient information"})]})]}),t.jsx("div",{className:"bg-card rounded-lg border p-6 space-y-4 max-w-4xl mx-auto",children:t.jsxs("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),a.handleSubmit()},className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(a.Field,{name:"name",validators:{onChange:({value:e})=>e?.trim()?void 0:"Name is required"},children:e=>t.jsx(n,{field:e,label:"Full Name *",placeholder:"Enter patient's full name"})}),t.jsx(a.Field,{name:"dateOfBirth",validators:{onChange:({value:e})=>{if(!e?.trim())return"Date of birth is required";const r=new Date(e);if(isNaN(r.getTime()))return"Please enter a valid date";if(r>new Date)return"Date cannot be in the future"}},children:e=>t.jsx(n,{field:e,label:"Date of Birth *",placeholder:"YYYY-MM-DD",helperText:"Format: YYYY-MM-DD"})}),t.jsx(a.Field,{name:"email",validators:{onChange:({value:e})=>{if(e&&e.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return"Please enter a valid email"}},children:e=>t.jsx(n,{field:e,label:"Email",placeholder:"patient@example.com"})}),t.jsx(a.Field,{name:"phone",children:e=>t.jsx(n,{field:e,label:"Phone",placeholder:"+1 (555) 123-4567"})})]}),t.jsx(a.Field,{name:"address",children:e=>t.jsx(n,{field:e,label:"Address",placeholder:"Enter patient's address",multiline:!0,rows:3})}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(l,{type:"button",variant:"outline",onClick:()=>d({to:"/patients"}),disabled:i.isPending,children:"Cancel"}),t.jsxs(l,{type:"submit",disabled:i.isPending,children:[i.isPending?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}):null,"Update Patient"]})]})]})})]})}export{q as component};
