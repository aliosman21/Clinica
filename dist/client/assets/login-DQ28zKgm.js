import{c as l,a as c,b as u,j as r,L as m}from"./main-deOYDPWY.js";import{u as x,C as t}from"./CustomTextInput-CVvPr6Oa.js";import{u as p}from"./useForm-DeDg2o24.js";import"./index-B3fMHV4j.js";import"./eye-DEYj2jSP.js";const g=c("2ef30eddd7c47d0d46d82843c1ce6b06a43ca54037008a0dc3fc159705fc12a8"),h=l({method:"POST"}).handler(g);function F(){const a=u.useNavigate(),s=x({mutationFn:h,onSuccess:e=>{if(!e?.error){a({to:"/"});return}},onError:e=>{console.error("Login error:",e)}}),{Field:n,handleSubmit:o,state:b,Subscribe:i}=p({defaultValues:{email:"",password:""},onSubmit:async({value:e})=>{s.mutate({data:e}),console.log("submitted values:",e)}});return r.jsx("div",{className:" flex items-center justify-center",children:r.jsxs("div",{className:"max-w-md w-full space-y-4 p-6 border rounded-lg",children:[r.jsx("h1",{className:"text-2xl font-bold text-center",children:"Login"}),r.jsxs("div",{children:[r.jsx(n,{name:"email",validators:{onChange:({value:e})=>{if(!e)return"Email is required";if(!/\S+@\S+\.\S+/.test(e))return"Please enter a valid email"}},children:e=>r.jsx(t,{field:e,label:"Email",placeholder:"Enter your email"})}),r.jsx(n,{name:"password",validators:{onChange:({value:e})=>{if(!e)return"Password is required"}},children:e=>r.jsx(t,{field:e,label:"Password",placeholder:"Enter your password",password:!0})})]}),r.jsx(i,{selector:e=>[e.canSubmit,e.isTouched],children:([e,d])=>r.jsx("button",{onClick:o,disabled:s.isPending||!e||!d,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s.isPending?"Logging in...":"Login"})}),s.data?.error&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-red-500 mt-4",children:s.data.message}),s.data.userNotFound&&r.jsx(m,{to:"/signup",color:"blue",children:"Sign Up instead"})]})]})})}export{F as component};
