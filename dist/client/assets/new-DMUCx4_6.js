import{c as m,e as u,a as h,u as p,f as x,g as f,t as d,j as a}from"./main-deOYDPWY.js";import{u as j,C as s}from"./CustomTextInput-CVvPr6Oa.js";import{u as g}from"./useForm-DeDg2o24.js";import{B as l}from"./button-CaKppYKQ.js";import{A as v}from"./arrow-left-D0rM7Gj6.js";import"./index-B3fMHV4j.js";import"./eye-DEYj2jSP.js";const b=h("ef99fa68986f704a3b4faad8aa951c748224e97076d74f49ac79a6870214a0ef"),N=m({method:"POST"}).middleware([u]).handler(b);function Y(){const n=p(),o=x(),c=f(N),r=j({mutationFn:e=>c({data:e}),onSuccess:()=>{o.invalidateQueries({queryKey:["patients"]}),d.success("Patient created successfully"),n({to:"/patients"})},onError:e=>{d.error("Error creating patient: "+e.message)}}),t=g({defaultValues:{name:"",email:"",phone:"",dateOfBirth:"",address:""},onSubmit:async({value:e})=>{r.mutate(e)}});return a.jsxs("div",{className:"container mx-auto py-4 space-y-6",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"flex justify-center",children:a.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>n({to:"/patients"}),children:[a.jsx(v,{className:"h-4 w-4 mr-2"}),"Back to Patients"]})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Create New Patient"}),a.jsx("p",{className:"text-muted-foreground",children:"Add a new patient to the system"})]})]}),a.jsx("div",{className:"bg-card rounded-lg border p-6 space-y-4 max-w-4xl mx-auto",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),t.handleSubmit()},className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(t.Field,{name:"name",validators:{onChange:({value:e})=>e?.trim()?void 0:"Name is required"},children:e=>a.jsx(s,{field:e,label:"Full Name *",placeholder:"Enter patient's full name"})}),a.jsx(t.Field,{name:"dateOfBirth",validators:{onChange:({value:e})=>{if(!e?.trim())return"Date of birth is required";const i=new Date(e);if(isNaN(i.getTime()))return"Please enter a valid date";if(i>new Date)return"Date cannot be in the future"}},children:e=>a.jsx(s,{field:e,label:"Date of Birth *",placeholder:"YYYY-MM-DD",helperText:"Format: YYYY-MM-DD"})}),a.jsx(t.Field,{name:"email",validators:{onChange:({value:e})=>{if(e&&e.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return"Please enter a valid email"}},children:e=>a.jsx(s,{field:e,label:"Email",placeholder:"patient@example.com"})}),a.jsx(t.Field,{name:"phone",children:e=>a.jsx(s,{field:e,label:"Phone",placeholder:"+1 (555) 123-4567"})})]}),a.jsx(t.Field,{name:"address",children:e=>a.jsx(s,{field:e,label:"Address",placeholder:"Enter patient's address",multiline:!0,rows:3})}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(l,{type:"button",variant:"outline",onClick:()=>n({to:"/patients"}),disabled:r.isPending,children:"Cancel"}),a.jsxs(l,{type:"submit",disabled:r.isPending,children:[r.isPending?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}):null,"Create Patient"]})]})]})})]})}export{Y as component};
